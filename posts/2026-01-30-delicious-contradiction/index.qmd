---
title: "A Delicious Contradiction"
author: "Aleksandra"
date: "2026-01-30"
categories: [finance, interactive]
image: "thumb.png"
description: "To be and not to be path dependent at the same time."
title-block-banner: true
---

What a delicious contradiction it is: to be and not to be path dependent at the same time. In [the post](https://excellentproblem.com/posts/2026-01-02-thermodynamics-101-for-investors/) “Thermodynamics 101 for Investors” I drew an analogy between function state, in thermodynamical sense, and investment outcomes. I claimed that the financial result you harvest does not depend on the ups and downs the stock price makes on a way. I claimed that these results solely depend on the price at start and the price at end points. It might sound counter-intuitive, but it is so. If you haven’t read the mentioned post yet, it is worth giving a try!

Funny enough, in economy there is a notion of path dependence. Even funnier, path dependence is related to the investment outcome. You can read [a great article](https://bestinterest.blog/path-dependence/) on this topic on the Best Interest blog, where Jesse Cramer illustrates path dependence with plausible investment of NASA researcher, Sally Ride. Spoiler alert: path of each investor is bumpy and different. It can be averaged, but it is never the average. 

The seemingly contradictory ways in which investment relates to the path have left me with a sort of Schrödinger’s cat situation, which I am going to wrestle a bit in the paragraphs below. 

![](cat.png)

Just as our macroscopic intuitions fall short in helping us grasp quantum physics phenomena [^1], financial shortcuts are often unhelpful as well. As such faulty financial intuition, I mean here the 7% return rule. The rule is widely used among index fund investors to estimate yearly return from stock investment. Looking at different historical paths, we will see how (surprisingly often) the 7% rule is far from the truth. Ok, but let’s start by saying what the 7% return rule is. It is an assumption that many investors make that in the long term, investment in broad stocks market returns 7% per year. As a careful reader might notice, “long term” is vaguely defined, or, being honest, not defined at all. For my 5-year-old son summer holidays is long term. For Warren Buffett “indefinitely” is long term. Recently I listened to a podcast, which described research about romantic relationships among university students. When asked about “long term relationship” the working definition was “lasting more than 3 months”. Writing these words in January, long-term meter of a 5-year-old is more conservative than the one of gen-Z. In this post, when I refer to "long term" I mean a decade or more - a span that represents a major part of a person's life. Down the road I will make claims and conclusions based on data on US stock market returns compiled by Yale economist Robert Shiller, known as Shiller data [^2]. 

I feel a sort of an imperative to give more details on what this data is and what it is not [^3]. Still, all what matter for this post is that Shiller data are consistent, available and cover relatively long time, and as such they are good to draw some plots. And conclusions. However, they are not representative for any other than American market. Also, history rhymes but does not repeat, and as such past performance is not a prognosis of future returns. Yet, studying history is to avoid mistakes of the past. All that said, let’s have a look at the first plot.

## Zoom Out: Full Historical View
```{r}
#| echo: false
#| warning: false

library(plotly)
library(dplyr)
library(readr)


# Load Shiller's data from post directory
df <- read_csv("monthly_dt_min.csv", show_col_types = FALSE)

# Create cumulative average dataframe using dplyr
df_cumul <- df %>%
  select(year, jan_price) %>%
  distinct(year, .keep_all = TRUE) %>%
  arrange(year) %>%
  mutate(
    pct_change = (jan_price / lag(jan_price) - 1) * 100
  ) %>%
  filter(!is.na(pct_change)) %>%  # Remove 1871 (no previous year, so no yearly data for averaging)
  mutate(
    cum_avg_pct_change = cummean(pct_change)
  )

# Create static plot with both traces
fig_static <- plot_ly(df_cumul, x = ~year) %>%
  add_trace(
    y = ~pct_change,
    type = 'scatter',
    mode = 'lines+markers',
    name = '% Return',
    line = list(color = 'green', width = 2),
    marker = list(size = 3),
    hovertemplate = 'Year: %{x}<br>%{y:.1f}%<extra></extra>'
  ) %>%
  add_trace(
    y = ~cum_avg_pct_change,
    type = 'scatter',
    mode = 'lines',
    name = 'Cumulative Average Return',
    line = list(color = 'blue', width = 3, dash = 'dash'),
    hovertemplate = 'Year: %{x}<br>%{y:.1f}%<extra></extra>'
  ) %>%
  layout(
    title = "Annual % Return and Cumulative Average Return (1872-2024)",
    xaxis = list(title = "Year"),
    yaxis = list(
      title = "Return, %",
      tickformat = '.1f'
    ),
    plot_bgcolor = "white",
    paper_bgcolor = "white",
    margin = list(l = 60, r = 60, t = 60, b = 60),
    legend = list(orientation = 'h', x = 0.5, xanchor = 'center', y = -0.2)
  )

fig_static
```

It shows a set of data on US stock market returns from 1871 to 2025. This plot has two traces, green solid trace and blue dashed trace. Green solid trace represents yearly nominal returns, expressed in percentages, %. The line helps to guide your sight from datapoint to datapoint. If you hover your finger over green trace, you can see returns for a particular year. Eg. it was -24.5% in 1975, 33.5% in 1976 and 7.5% in 1977. Overall, when you look at the green trace you see many ups and downs. It is hard to answer the question “what typically the US stock market returns?” On the other hand, blue dashed line shows what happens when you cumulatively average yearly returns. The trace starts bumpy but smoothens out the further from the start you are. You see that from ~ year 2000 the returns average to 6% yearly. With this trace you can immediately answer the question: what did the stock market return on average from 1871 to 1950? (and now hover over blue dashed line for 1950). A bonus: if you made it that far in the post, you can isolate the blue trace by clicking on it in the plot legend. 

## Zoom in: Check Different Historical Time Ranges

In the second plot, you can play by yourself. It is built on the same data, but it recalculates average returns depending on the chosen start year. You can test how average returns look like for different periods of time, because they are highly dependent on the starting year. If you examine the post-war prosperity period, you will see that the returns average to ~9% yearly. Subtract 2% for inflation and you have a 7% yearly return. Now let’s check 2000 -2010: 1%. Not fun, yeah? Shifting whole decade by 2 years 2002-2012 gives 1.7%, 70% more but still far from 7% yearly. Waiting till 2015 yielded 4.8% yearly. How strikingly different it is from 16.4% of nineties. You can explore what was the most fortunate and the most unfortunate period to invest in US stocks, and play with its length [^4]. 

```{r}
#| echo: false
#| warning: false

library(htmlwidgets)

# Load helper functions
source("plot_helpers.R")

# Prepare data for JavaScript (using df_cumul from previous chunk)
years_list <- df_cumul$year
pct_change_list <- df_cumul$pct_change
jan_price_list <- df_cumul$jan_price

# Read external JavaScript file
js_code <- readLines("plot_interactive.js", warn = FALSE)
js_code <- paste(js_code, collapse = "\n")

# Create interactive plot
fig_interactive <- plot_ly() %>%
  layout(
    title = "Annual % Return and Cumulative Average of Returns",
    xaxis = list(title = "Year"),
    yaxis = list(title = "Return, %"),
    plot_bgcolor = "white",
    paper_bgcolor = "white"
  )

# Add HTML controls using helper function
fig_interactive <- fig_interactive %>%
  htmlwidgets::prependContent(
    create_year_controls(
      default_start = 1872,
      default_end = 2024,
      min_year = 1872,
      max_year = 2024
    )
  )

# Attach JavaScript from external file
fig_interactive <- fig_interactive %>%
  htmlwidgets::onRender(
    sprintf(
      "function(el, x) {
        %s
        initInteractivePlot(el, {years: %s, pctChange: %s, janPrice: %s});
      }",
      js_code,
      jsonlite::toJSON(years_list, auto_unbox = TRUE),
      jsonlite::toJSON(pct_change_list, auto_unbox = TRUE, null = "null"),
      jsonlite::toJSON(jan_price_list, auto_unbox = TRUE)
    )
  )

fig_interactive
``` 

If you tried multiple ranges, have you noticed how the blue line wiggles at the beginning, regardless of when you start? And then, after ~20 years the average gets stable. The further from the start you go, the harder it is to move the needle. So here is a question, should anybody care about average returns? If all goes well, you should have more money as the time progress. It means that return in the 20th year of investment mean nominally much more than return in the 3rd year. Is there any occasion when the value of  average returns is useful? I think it is useful on at least two occasions: if you want to compare asset classes. It is meaningful to say, by average stocks return 3% more than bonds. Also, the 7% return rule provides a very useful mental model to think about exponential growth: if something grows 7% a year, it doubles the initial capital after a decade [^5].

It brings me back to the original contradiction. Is investment result path dependent and path independent at the same time? Well, it is, if we stick to the existing naming convention.  As you just saw by playing with the time ranges for average cumulative return calculations, the trace wiggles at the beginning and averages after decade or two. In this way I think a better name for the effect should have initial conditions, not path, in name. Initial conditions dependency. Similar like for weather forecast models. It is not only about the destination, but also about the journey. Thank you for reading.

[^1]: lack of these intuitions makes us surprised when studying the matter. As Niehls Bohr said, “Those who are not shocked when they first come across quantum theory cannot possibly have understood it.”
[^2]: What most people think when they talk about Shiller data, are values of CAPE Ratio, Cyclically Adjusted Price-to-Earnings ratio. I am using here source data used for CAPE calculation, but not CAPE itself. 
[^3]: I know it is not “Materials and Methods” section but paragraph in a blog post. Yet, in a blog dedicated to representing data and emphasizing the importance of data quality, I owe my readers some details on what input I use and why:

    - it is extrapolated back to 1871, which makes 150+ years of market data. 15 decades for a single human being is a decent background to talk about long term returns.
    - to put it in perspective, year 1871 was way earlier than conception of the S&P500 index, waaay earlier than conception of any stock index, and waaaaaay earlier than it was possible to invest in broad stock market.
    - overall, this data originates from a single country, which is a significant factor in maintaining consistency. It is considerably more feasible to ensure uniformity over an extended period when concerning the same currency and the same political entity. It would be extremely hard if not impossible to have comparable data from Europe.
    - importantly, the USA is not any country in the world, but the one with the most prosperous stock market for 75+ years. Therefore this data is not a good proxy to make assumptions on stock returns in general (look at the indices of a few European countries and see how long did it took them to recover from 2008 crisis. USA was brisk and growing back in 2012, whereas some EU markets still have not reached 2008 levels. OMG, footnote in a footnote, I need to stop.)
[^4]: Mind that the value of year x1 (selected as starting year) builds on the January value from year x0. 
[^5]: Try it: 1.07^10^
